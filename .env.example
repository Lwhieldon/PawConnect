# ============================================================
# PawConnect AI - Environment Configuration
# ============================================================
#
# USAGE:
# 1. Copy this file to .env: cp .env.example .env
# 2. Update values based on your environment (development or production)
# 3. For production: Set TESTING_MODE=False and MOCK_APIS=False
# 4. Never commit .env to version control (already in .gitignore)
#
# ============================================================

# ============================================================
# ENVIRONMENT & DEBUG SETTINGS
# ============================================================

# Environment: development, staging, or production
ENVIRONMENT=production

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=DEBUG

# Enable debug mode (set to False for production)
DEBUG=False

# ============================================================
# TESTING & MOCKING
# ============================================================
# IMPORTANT: For production deployment, set both to False
# For local development/testing, set both to True

# Enable testing mode (uses mock data when True)
TESTING_MODE=False

# Enable mock APIs (bypasses real API calls when True)
MOCK_APIS=False

# ============================================================
# GOOGLE CLOUD PLATFORM
# ============================================================

# Your GCP Project ID
GCP_PROJECT_ID=your-gcp-project-id

# GCP Region (e.g., us-central1, us-east1, europe-west1)
GCP_REGION=us-central1

# Path to GCP credentials JSON file
# Leave empty to use Application Default Credentials (recommended for production)
GCP_CREDENTIALS_PATH=

# ============================================================
# RESCUEGROUPS API
# ============================================================

# RescueGroups API Key (required for production)
# Get your key at: https://userguide.rescuegroups.org/display/APIDG/API+Developers+Guide+Home
#
# SECURITY NOTE: For production, store this in Google Secret Manager!
# Do NOT put your real API key in this file if committing to version control
#
# Development: Use a test key or mock mode (MOCK_APIS=True)
# Production: Leave blank and use Secret Manager (see docs/DEPLOYMENT.md)
RESCUEGROUPS_API_KEY=your_rescuegroups_api_key

# RescueGroups API Base URL (do not change unless using different environment)
RESCUEGROUPS_BASE_URL=https://api.rescuegroups.org/v5

# ============================================================
# DIALOGFLOW CX
# ============================================================

# Dialogflow CX Agent ID (get from Dialogflow Console)
#
# SECURITY NOTE: For production, store this in Google Secret Manager!
# Production: Leave blank and use Secret Manager (see docs/DEPLOYMENT.md)
DIALOGFLOW_AGENT_ID=your_dialogflow_agent_id

# Dialogflow Location (should match GCP_REGION)
DIALOGFLOW_LOCATION=us-central1

# Dialogflow Webhook URL (for setup script)
# Example: https://your-cloud-run-url/webhook
# Leave empty if not deploying webhook yet
DIALOGFLOW_WEBHOOK_URL=

# ============================================================
# VERTEX AI (Optional - for custom recommendation models)
# ============================================================

# Vertex AI Model Endpoint (leave empty if not using custom models)
VERTEX_AI_ENDPOINT=

# Vertex AI Model Name
VERTEX_AI_MODEL_NAME=recommendation-model

# ============================================================
# GEMINI AI (For ConversationAgent)
# ============================================================
# Gemini uses Vertex AI SDK - ensure GCP_PROJECT_ID and GCP_REGION are set above
# Note: Gemini 1.5 models retired April 2025, using Gemini 2.0

# Gemini Model Name (use gemini-2.0-flash-001 or gemini-2.0-pro-001)
GEMINI_MODEL_NAME=gemini-2.0-flash-001

# Gemini Temperature (0.0-1.0, lower = more deterministic)
GEMINI_TEMPERATURE=0.7

# Gemini Max Output Tokens
GEMINI_MAX_OUTPUT_TOKENS=1024

# Enable Gemini for conversation agent (set to False to use rule-based fallback)
USE_GEMINI_FOR_CONVERSATION=True

# ============================================================
# CLOUD VISION API
# ============================================================

# Enable Cloud Vision API for image analysis
VISION_API_ENABLED=True

# ============================================================
# CLOUD PUB/SUB
# ============================================================

# Pub/Sub Topic Prefix (e.g., pawconnect-dev, pawconnect-prod)
PUBSUB_TOPIC_PREFIX=pawconnect

# Specific topic names
PUBSUB_SEARCH_TOPIC=pawconnect-search-results
PUBSUB_RECOMMENDATION_TOPIC=pawconnect-recommendations

# ============================================================
# FIRESTORE DATABASE
# ============================================================

# Firestore collection names
FIRESTORE_COLLECTION_USERS=users
FIRESTORE_COLLECTION_APPLICATIONS=applications
FIRESTORE_COLLECTION_SESSIONS=sessions

# ============================================================
# REDIS / MEMORYSTORE
# ============================================================

# Redis Host
# Development: localhost
# Production: Memorystore internal IP (e.g., 10.0.0.3)
REDIS_HOST=localhost

# Redis Port (default: 6379)
REDIS_PORT=6379

# Redis Database Number (default: 0)
REDIS_DB=0

# Redis Password
# Development: leave empty for local Redis without auth
# Production: use password from Secret Manager (auto-generated by Memorystore)
#
# SECURITY NOTE: For production, store this in Google Secret Manager!
# The Redis auth string is automatically generated when you create Memorystore
# Production: Leave blank and use Secret Manager (see docs/DEPLOYMENT.md)
REDIS_PASSWORD=

# Cache Time-To-Live in seconds (default: 1 hour)
CACHE_TTL=3600

# ============================================================
# API SETTINGS
# ============================================================

# API request timeout in seconds
API_TIMEOUT=30

# Maximum number of API retry attempts
API_MAX_RETRIES=3

# API rate limit (requests per minute)
API_RATE_LIMIT=100

# ============================================================
# SEARCH SETTINGS
# ============================================================

# Default search radius in miles
DEFAULT_SEARCH_RADIUS=50

# Maximum number of search results to return
MAX_SEARCH_RESULTS=100

# ============================================================
# RECOMMENDATION SETTINGS
# ============================================================

# Number of top recommendations to return
RECOMMENDATION_TOP_K=10

# Minimum recommendation score threshold (0.0-1.0)
RECOMMENDATION_MIN_SCORE=0.5

# ============================================================
# MODEL SETTINGS
# ============================================================

# Model confidence threshold for predictions (0.0-1.0)
MODEL_CONFIDENCE_THRESHOLD=0.7

# ============================================================
# MCP SERVERS - EMAIL & CALENDAR
# ============================================================

# Default providers (gmail, outlook, sendgrid for email; google-calendar, outlook for calendar)
MCP_EMAIL_PROVIDER=gmail
MCP_CALENDAR_PROVIDER=google-calendar

# Enable/disable MCP features
MCP_EMAIL_ENABLED=True
MCP_CALENDAR_ENABLED=True

# ============================================================
# GMAIL MCP SERVER
# ============================================================
# Get credentials at: https://console.cloud.google.com/apis/credentials
# Enable Gmail API: https://console.cloud.google.com/apis/library/gmail.googleapis.com

GMAIL_CLIENT_ID=your_gmail_client_id.apps.googleusercontent.com
GMAIL_CLIENT_SECRET=your_gmail_client_secret
GMAIL_REDIRECT_URI=http://localhost:8080/oauth/callback
GMAIL_REFRESH_TOKEN=your_gmail_refresh_token

# Sender information for emails
GMAIL_FROM_EMAIL=noreply@pawconnect.org
GMAIL_FROM_NAME=PawConnect Team

# ============================================================
# GOOGLE CALENDAR MCP SERVER
# ============================================================
# Get credentials at: https://console.cloud.google.com/apis/credentials
# Enable Google Calendar API: https://console.cloud.google.com/apis/library/calendar-json.googleapis.com

GOOGLE_CALENDAR_CLIENT_ID=your_calendar_client_id.apps.googleusercontent.com
GOOGLE_CALENDAR_CLIENT_SECRET=your_calendar_client_secret
GOOGLE_CALENDAR_REDIRECT_URI=http://localhost:8080/oauth/callback
GOOGLE_CALENDAR_REFRESH_TOKEN=your_calendar_refresh_token

# Default calendar for shelter visits (Calendar ID, e.g., primary or shelter@pawconnect.org)
GOOGLE_CALENDAR_ID=primary

# ============================================================
# MICROSOFT OUTLOOK/365 MCP SERVER (Optional Alternative)
# ============================================================
# Get credentials at: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade
# Enable Mail.Send and Calendars.ReadWrite permissions

OUTLOOK_CLIENT_ID=your_outlook_client_id
OUTLOOK_CLIENT_SECRET=your_outlook_client_secret
OUTLOOK_REDIRECT_URI=http://localhost:8080/oauth/callback
OUTLOOK_REFRESH_TOKEN=your_outlook_refresh_token
OUTLOOK_TENANT_ID=common

# ============================================================
# SENDGRID MCP SERVER (Production Email Alternative)
# ============================================================
# Get API key at: https://app.sendgrid.com/settings/api_keys
# Recommended for production transactional emails

SENDGRID_API_KEY=your_sendgrid_api_key
SENDGRID_FROM_EMAIL=noreply@pawconnect.org
SENDGRID_FROM_NAME=PawConnect Team

# ============================================================
# EMAIL TEMPLATES & NOTIFICATIONS
# ============================================================

# Subject line templates
EMAIL_VISIT_CONFIRMATION_SUBJECT=Your Visit to Meet {pet_name} is Confirmed!
EMAIL_APPLICATION_RECEIVED_SUBJECT=We Received Your {application_type} Application
EMAIL_APPLICATION_STATUS_SUBJECT=Update on Your Application for {pet_name}

# Enable specific notification types
EMAIL_NOTIFY_VISIT_SCHEDULED=True
EMAIL_NOTIFY_APPLICATION_STATUS=True
EMAIL_NOTIFY_FOSTER_ADOPTER_MATCH=True

# Email rate limiting (emails per hour)
EMAIL_RATE_LIMIT=100

# ============================================================
# PRODUCTION DEPLOYMENT NOTES
# ============================================================
#
# For production deployment on GCP:
# 1. Set ENVIRONMENT=production
# 2. Set TESTING_MODE=False
# 3. Set MOCK_APIS=False
# 4. Set GCP_PROJECT_ID to your production project
# 5. Set GCP_REGION to your deployment region
# 6. Update REDIS_HOST to Memorystore internal IP
# 7. Leave GCP_CREDENTIALS_PATH empty (uses ADC)
#
# SECRETS MANAGEMENT (CRITICAL for Production):
# Store ALL sensitive credentials in Google Cloud Secret Manager:
# - RESCUEGROUPS_API_KEY → rescuegroups-api-key
# - REDIS_PASSWORD → redis-password
# - DIALOGFLOW_AGENT_ID → dialogflow-agent-id
# - GMAIL_CLIENT_SECRET → gmail-client-secret
# - GMAIL_REFRESH_TOKEN → gmail-refresh-token
# - GOOGLE_CALENDAR_CLIENT_SECRET → google-calendar-client-secret
# - GOOGLE_CALENDAR_REFRESH_TOKEN → google-calendar-refresh-token
# - SENDGRID_API_KEY → sendgrid-api-key
#
# Create secrets:
#   gcloud secrets create rescuegroups-api-key --data-file=-
#   gcloud secrets create redis-password --data-file=-
#   gcloud secrets create dialogflow-agent-id --data-file=-
#   gcloud secrets create gmail-client-secret --data-file=-
#   gcloud secrets create gmail-refresh-token --data-file=-
#   gcloud secrets create sendgrid-api-key --data-file=-
#
# For local development, load secrets:
#   source deployment/scripts/load-secrets.sh
#
# For Cloud Run deployment:
#   Secrets are automatically injected via --set-secrets flag
#   (see deployment/cloudbuild.yaml and docs/DEPLOYMENT.md)
#
# ⚠️  NEVER commit actual credentials to version control!
# ⚠️  NEVER put production secrets in this .env file!
#
# For complete guide, see docs/DEPLOYMENT.md - "Configure Secrets Manager"
# ============================================================
